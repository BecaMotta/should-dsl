>>> from should_dsl import should, should_not

>>> class Box(object):
...     def __init__(self):
...         self.items = []
...     def add_items(self, *items):
...         for item in items:
...             self.items.append(item)
...     def item_count(self):
...         return len(self.items)
...     def clear(self):
...         self.items = []

>>> box = Box()
>>> (lambda: box.add_items(1)) |should| change(box.item_count)
True
>>> (lambda: box.add_items(1)) |should_not| change(box.item_count)
Traceback (most recent call last):
    ...
ShouldNotSatisfied: should not have changed, but did change from 1 to 2
>>> (lambda: 0) |should| change(box.item_count)
Traceback (most recent call last):
    ...
ShouldNotSatisfied: result should have changed, but is still 2
>>> (lambda: 0) |should_not| change(box.item_count)
True

>>> (box.add_items, 1) |should| change(box.item_count)
True
>>> (box.add_items, 1) |should| change(box.items)
Traceback (most recent call last):
    ...
TypeError: parameter passed to change must be a callable or a iterable having a callable as its first element
>>> (1, box.add_items) |should| change(box.item_count)
Traceback (most recent call last):
    ...
TypeError: parameter passed to change must be a callable or a iterable having a callable as its first element


>>> (lambda: box.add_items(1)) |should| change(box.item_count).by(1)
True
>>> (lambda: box.add_items(1)) |should| change(box.item_count).by(2)
Traceback (most recent call last):
    ...
ShouldNotSatisfied: result should have changed by 2, but was changed by 1
>>> (lambda: 1) |should| change(box.item_count).by(0)
True

>>> (box.add_items, 1, 2, 3) |should| change(box.item_count).by_at_least(3)
True
>>> (box.add_items, 1, 2, 3) |should| change(box.item_count).by_at_least(2)
True
>>> (box.add_items, 1, 2, 3) |should| change(box.item_count).by_at_least(1)
True
>>> (box.add_items, 1, 2, 3) |should| change(box.item_count).by_at_least(4)
Traceback (most recent call last):
    ...
ShouldNotSatisfied: result should have changed by at least 4, but was changed by 3

